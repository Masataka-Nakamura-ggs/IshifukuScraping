# 20250905_001.md 対応タスクリスト

## 概要

`main_lambda.py` を修正し、AWS Lambda 環境で複数商品（「金」および「地金型コイン」）の価格を取得できるようにする。コマンドライン引数（`--multi`）は不要で、常に複数商品を取得する仕様とする。

---

## タスク一覧

1. **作業指示書内容の精読・要件整理**
    - #file:20250905_001.md の内容を正確に把握し、作業要件を整理する。

2. **main_lambda.py の修正**
    - 2-1. `lambda_handler` 内のスクレイピング呼び出しを `scraper.scrape_and_save()` から `scraper.scrape_all_and_save()` に変更する。
    - 2-2. 成功時のレスポンス（body）を `products` キーのリスト形式に修正し、`ProductPrice` オブジェクトを辞書リストに変換する。
    - 2-3. 成功時のログ出力を「取得商品数」付きに修正する。

3. **テスト実行と動作確認**
    - 3-1. `tests/test_main_lambda.py` を実行し、エラーがないことを確認する。
    - 3-2. 実行ログに「✅ Lambda スクレイピング処理が正常に完了しました (取得商品数: X/Y)」が出力されることを確認する。
    - 3-3. Lambda のレスポンスボディに `products` キーが含まれ、リスト形式で商品情報が格納されていることを確認する。
    - 3-4. 取得失敗時は `price` が null または None となっていることを確認する。

---

## 備考
- ソース修正はタスクリスト確認後に着手する。
- Black, isort, flake8, mypy でのチェックが全て正常になるように修正を行うこと。
